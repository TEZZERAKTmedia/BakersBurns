import{r as i,b as E,u as S,j as e,a as p}from"./index-fIWC6sAC.js";const b=()=>{const[t,c]=i.useState(null),[l,r]=i.useState(""),[g,m]=i.useState(""),[V,d]=i.useState(!1),[N,y]=i.useState(!1),f=E(),x=S(),h=()=>{const s=new URLSearchParams(f.search);return{email:s.get("email"),token:s.get("token")}};i.useEffect(()=>{const{email:s,token:n}=h();s&&n?(async()=>{var o,v;try{const a=await p.get("/sign-up/create-account",{params:{email:s,token:n}});a.status===200&&a.data.verified?(c("success"),r(`Verification successful. User ${s} moved to permanent table. You can now log in.`)):a.status===409?(c("email_registered"),r(a.data.message||`The email ${s} is already registered.`),y(!0)):(c("failed"),r(a.data.message||"Verification failed."))}catch(a){c("error"),r(((v=(o=a.response)==null?void 0:o.data)==null?void 0:v.message)||"Error verifying the account.")}})():r("Invalid or missing verification details.")},[f.search]);const j=async()=>{var n,u;const{email:s}=h();try{(await p.post("sign-up/resend-verification",{email:s})).status===200?(d(!0),m("Verification email has been resent. Please check your inbox.")):(d(!1),m("Failed to resend verification email. Please try again."))}catch(o){d(!1),m(((u=(n=o.response)==null?void 0:n.data)==null?void 0:u.message)||"Error resending verification email.")}};return e.jsxs("div",{className:"verify-email-container",children:[e.jsx("h1",{children:"Email Verification"}),t==="success"&&e.jsxs("div",{className:"success-message",children:[l,". Completing the process..."]}),t==="email_registered"&&e.jsxs("div",{className:"info-message",children:[l," You can log in to your account.",e.jsx("button",{onClick:()=>x("/login"),children:"Go to Login"})]}),t==="failed"&&e.jsxs("div",{className:"error-message",children:[l,". Please try again or contact support.",e.jsx("button",{onClick:j,children:"Resend Verification Email"})]}),t==="error"&&e.jsx("div",{className:"error-message",children:l}),!t&&e.jsx("div",{className:"loading-message",children:"Verifying your account..."}),g&&e.jsx("div",{className:"resend-message",children:g})]})};export{b as default};
