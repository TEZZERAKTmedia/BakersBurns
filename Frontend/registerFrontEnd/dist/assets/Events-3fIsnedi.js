import{r as a,h as o,j as t,a as S}from"./index--_G9GfXh.js";const y=()=>{const[d,f]=a.useState([]),[n,i]=a.useState(o()),[h,u]=a.useState(null),[m,M]=a.useState([]);a.useEffect(()=>{(async()=>{try{const s=await S.get("/register-events/all");f(s.data)}catch(s){console.error("Failed to fetch events",s)}})()},[]);const x=n.clone().startOf("month");n.clone().endOf("month");const v=x.day(),Y=n.daysInMonth(),c=[];for(let e=0;e<v;e++)c.push(null);for(let e=1;e<=Y;e++)c.push(e);const j=e=>{if(!e)return;const s=n.clone().date(e).format("YYYY-MM-DD");u(s);const r=d.filter(l=>l.startDate===s);M(r)},D=e=>{if(!e)return!1;const s=n.clone().date(e).format("YYYY-MM-DD");return d.some(r=>r.startDate===s)},p=()=>i(e=>e.clone().subtract(1,"month")),E=()=>i(e=>e.clone().add(1,"month"));return t.jsx("div",{className:"calendar-page",children:t.jsxs("div",{className:"calendar-container",children:[t.jsxs("div",{className:"calendar-header",children:[t.jsx("button",{onClick:p,children:"←"}),t.jsx("h2",{children:n.format("MMMM YYYY")}),t.jsx("button",{onClick:E,children:"→"})]}),t.jsxs("div",{className:"calendar-grid",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>t.jsx("div",{className:"calendar-day-label",children:e},e)),c.map((e,s)=>{const l=(e?n.clone().date(e).format("YYYY-MM-DD"):null)===o().format("YYYY-MM-DD"),N=["calendar-cell",D(e)?"has-event":"",l?"today":""].filter(Boolean).join(" ");return t.jsx("div",{className:N,onClick:()=>j(e),children:e||""},s)})]}),h&&t.jsxs("div",{className:"events-list",children:[t.jsxs("h3",{children:["Events on ",o(h).format("MMMM Do")]}),m.length>0?m.map(e=>t.jsxs("div",{className:"event-details",children:[t.jsx("h4",{children:e.name}),t.jsx("p",{children:e.description}),e.startTime&&t.jsxs("p",{children:["Time: ",o(e.startTime,"HH:mm:ss").format("h:mm A")]})]},e.id)):t.jsx("p",{children:"No events on this day."})]})]})})};export{y as default};
